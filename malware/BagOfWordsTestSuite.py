# -*- coding: utf-8 -*-

import numpy as np
import matplotlib.pyplot as plt

def bow1_Test():
    
    import ObjectFactory
    factory = ObjectFactory.Factory("asanso.windows.1")
    
    cleaner = factory.getCleaner()
    tokenizer = factory.getTokenizer()
    modeler = factory.getModeler()
    
    rawFileFullNamePath = "c:/datamandanga/experiments/myexp_500_70/raw-samples/train/3RiBw0ntobeCh5VEQrY1.asm"
    cleanAssemblyLines = cleaner.clean(rawFileFullNamePath)
    tokenizedAssemblyLines = tokenizer.tokenize_FromArray(cleanAssemblyLines)
    bag = modeler.buildBag_FromArray(tokenizedAssemblyLines)
    #print bag.items()
    
    most_common = modeler.simpleNormalizeBag(bag.most_common(40))
    doPlotBagOfWords(most_common)
    
def doPlotBagOfWords(bag):
    
    labels, values = zip(*bag)
    
    indexes = np.arange(len(labels))
    width = 1
    plt.figure(figsize=(20,5))
    plt.bar(indexes, values, width)
    plt.xticks(indexes + width * 0.5, labels)
    plt.show()   
    print "OK"

bow1_Test()


